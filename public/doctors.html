<!DOCTYPE html>
<html>
<head>
  <title>Doctors</title>
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
  rel="stylesheet"
>
</head>
<body>

  <div id="header"></div>


     <!-- MAIN CONTENT -->
     <div class="col-md-10 p-4 main-content">
      <div class="card p-4 mb-4"> 
        <h2>Doctors (Admin Only)</h2>
      
        <div class="row g-2">
          <div class="col-md-6">
            <input id="name" class="form-control" placeholder="Doctor Name" />
          </div>
          <div class="col-md-6">
            <input id="specialization" class="form-control" placeholder="Specialization" />
          </div>
        </div>
      
        <button onclick="addDoctor()" class="btn btn-primary mt-3">
          Add Doctor
        </button>
      
        <hr />
        <div id="doctors"></div>
      
        <a href="/dashboard" class="btn btn-secondary mt-3">Back</a>
      </div>
      
</div>

<script>
  fetch("header.html")
    .then(res => res.text())
    .then(html => document.getElementById("header").innerHTML = html);
</script>  

<script>
  async function loadDoctors() {
    const res = await fetch('/api/mobile/doctors');
    const data = await res.json();
  
    const container = document.getElementById('doctors');
    container.innerHTML = '';
  
    data.doctors.forEach(d => {
      container.innerHTML += `
        <div class="card p-2 mb-2">
          <strong>${d.name}</strong>
          <div>${d.specialization}</div>
        </div>
      `;
    });
  }
  
  async function addDoctor() {
    const name = document.getElementById('name').value;
    const specialization = document.getElementById('specialization').value;
  
    if (!name || !specialization) {
      alert('Fill all fields');
      return;
    }
  
    const res = await fetch('/api/mobile/doctors', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ name, specialization })
    });
  
    const data = await res.json();
  
    if (data.success) {
      document.getElementById('name').value = '';
      document.getElementById('specialization').value = '';
      loadDoctors();
    } else {
      alert('Error adding doctor');
    }
  }
  
  loadDoctors();
  </script>
  

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


</body>
</html>
